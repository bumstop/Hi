<!DOCTYPE html>
<html>
	<head>
		<title>반응속도 테스트</title>
		<link rel="stylesheet" href="./style.css"/>
	</head>
	<body>
		<div id="test_box" class="screen_0">
			"Click to start"
		</div>
		<script>
			const q = (q) => document.querySelector(q);
			const testBox = q('#test_box');
			const screenState = (c) => testBox.classList.contains(c);
			let testTimeout;
			let start;
			let end;

			function setScreenResult(attr, inner) {
				testBox.setAttribute('class', attr);
				testBox.innerHTML = inner;
			}
			addEventListener('click', function() {
				if(screenState('screen_test')) changeScreenSuccess();
				else if(screenState('screen_default')) changeScreenFail();
				else changeScreenDefault(); // 실패나 성공화면일때 else 실행
			});
			
			function changeScreenDefault() {
				setScreenResult('screen_default', '"Wait for Green"');
				// testBox.setAttribute('class', 'screen_default');
				// testBox.innerHTML = '"Wait for Green"';
				testTimeout = setTimeout(changeScreenTest, 1000 + Math.random() * 5000); 
			}
			function changeScreenTest() {
				start = new Date;
				setScreenResult('screen_test', 'Click!');
				// testBox.setAttribute('class', 'screen_test');
				// testBox.innerHTML = 'Click!';
			}
			function changeScreenSuccess() {
				end = new Date;
				setScreenResult('screen_success', `${end - start}ms`);
				// testBox.setAttribute('class', 'screen_success');
				// testBox.innerHTML = `${end - start}ms`;
			}
			function changeScreenFail() {
				setScreenResult('screen_fail', 'Oops!');
				// testBox.setAttribute('class', 'screen_fail');
				// testBox.innerHTML = 'Oops!';
				clearTimeout(testTimeout);
			} 
			
			



		</script>
	</body>
</html>